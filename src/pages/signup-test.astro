---
// Simple test page to debug sign-up issues
const publishableKey = import.meta.env.PUBLIC_CLERK_PUBLISHABLE_KEY;
---

<html>
<head>
    <title>Sign-Up Debug Test</title>
    <script 
        async 
        crossorigin 
        data-clerk-publishable-key={publishableKey}
        src="https://unpkg.com/@clerk/clerk-js@latest/dist/clerk.browser.js"
        type="text/javascript"
    ></script>
</head>
<body>
    <h1>Sign-Up Debug Test</h1>
    
    <div id="sign-up-container" style="margin: 2rem 0;"></div>
    
    <div id="debug-info" style="background: #f0f0f0; padding: 1rem; margin: 1rem 0;">
        <h3>Debug Info:</h3>
        <p><strong>Publishable Key:</strong> {publishableKey || 'Missing'}</p>
        <p><strong>Expected Domain:</strong> localhost</p>
        <div id="clerk-status">Loading...</div>
    </div>
    
    <script>
        window.addEventListener('load', async () => {
            const debugDiv = document.getElementById('clerk-status');
            
            try {
                if (window.Clerk) {
                    await window.Clerk.load();
                    debugDiv.innerHTML = '✅ Clerk loaded successfully';
                    
                    // Mount sign-up component
                    const signUpDiv = document.getElementById('sign-up-container');
                    window.Clerk.mountSignUp(signUpDiv, {
                        afterSignUpUrl: '/',
                        appearance: {
                            elements: {
                                socialButtonsBlockButton: "display: none",
                                dividerRow: "display: none"
                            }
                        }
                    });
                    
                } else {
                    debugDiv.innerHTML = '❌ Clerk not available';
                }
            } catch (error) {
                debugDiv.innerHTML = `❌ Clerk error: ${error.message}`;
                console.error('Clerk error:', error);
            }
        });
    </script>
    
    <p><a href="/">Back to Home</a></p>
</body>
</html>